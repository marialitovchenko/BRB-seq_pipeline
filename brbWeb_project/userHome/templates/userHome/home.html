{% extends "userHome/base.html" %}

{% block content %}
	<h1> User home! </h1>

	<div class="container">
    <div class="row">
        <div class="col-lg-12">
                <div class="table">
                <table class="table">
                    <tr>
                        <th>ID</th>
                        <th>Author</th>
                        <th>Name</th>
                        <th>Date created</th>
                        <th>Date updated</th>
                        <th>Description</th>
        			</tr>
        			{% for project in projects %}
        				{% if project.author  == user %}
                        	<tr>
                           		<td >{{ project.id }}</td>
                           		<td >{{ project.author }}</td>
                           		<td class="editable" data-id="{{ project.id }}" data-type="name">{{ project.name }}</td>
                           		<td class="editable" data-id="{{ project.id }}" data-type="date_created">{{ project.date_created }}</td>
                           		<td class="editable" data-id="{{ project.id }}" data-type="date_updated">{{ project.date_updated }}</td>
                           		<td class="editable" data-id="{{ project.id }}" data-type="description">{{ project.description }}</td>
                        	</tr>
                        {% endif %}
                    {% endfor %}
                </table>
            	</div>
         </div>
     </div>
 </div>
	<a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'project-create' %}"> New project </a>
	{% for project in projects %}
		{% if project.author  == user %}
		 	<article class="media content-section">
          	<img class="rounded-circle article-img" src={{ project.author.profile.image.url }}>
				<div class="media-body">
			   		<div class="article-metadata">
			      		<a class="mr-2" href="#">{{ project.author }}</a>
			      		<small class="text-muted">{{ project.date_created|date:"d F, Y"}}</small>
			    	</div>
			    	<h2><a class="article-title" href="{% url 'project-detail' project.id %}">{{ project.name }}</a></h2>
			    	<p class="article-content">{{ project.description }}</p>
				</div>
			</article>
		{% endif %}
	{% endfor %}

	{% if is_paginated %}

		{% if page_obj.has_previous %}
			<a class="btn btn-outline-info mb4" href="?page=1">1</a>		
			<a class="btn btn-outline-info mb4" href="?page={{ page_obj.has_previous_page_number }}">Previous</a>
		{% endif%}

		{% for num in page_obj.paginator.page_range %}
			{% if page_obj.number == num %}
				<a class="btn btn-info mb4" href="?page={{ num }}">{{ num }}</a>
			{% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3'  %}
				<a class="btn btn-info mb4" href="?page={{ num }}">{{ num }}</a>
			{% endif %}
		{% endfor %}

		{% if page_obj.has_next %}
			<a class="btn btn-outline-info mb4" href="?page=page_obj.next_page_number">Next</a>		
			<a class="btn btn-outline-info mb4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
		{% endif%}

	{% endif %}
{% endblock content %}
